# Network allowlist for Claude Code containers.
#
# Only hosts listed here are reachable from inside the container.
# All other traffic is blocked by the mitmproxy-based network proxy.
#
# To request access to a new host, add it here and submit a PR.
# See doc/network-sandbox.md for details.
#
# This file is read from the git mirror (main branch), not from the
# conversation workspace.  Changes take effect after merging to main.
#
# Pattern matching uses fnmatch-style wildcards (* and ?):
#   - "*.github.com" matches "api.github.com" but NOT "github.com"
#   - "/api/*" matches "/api/foo" but NOT "/api"
#   - "/api" matches only "/api" exactly (no implicit prefix matching)

# Domains: all paths and methods allowed (exact match unless wildcards used)
domains:
  - api.anthropic.com

# URL patterns: domain + path pattern required (fnmatch wildcards supported)
url_prefixes:
  # Claude telemetry and error reporting (POST-only)
  - host: statsig.anthropic.com
    path: ""
    methods: [POST]
  - host: sentry.io
    path: ""
    methods: [POST]

  # Python packages — read-only (uv sync in entrypoint)
  - host: pypi.org
    path: ""
    methods: [GET, HEAD]
  - host: files.pythonhosted.org
    path: ""
    methods: [GET, HEAD]

  # GitHub — restricted to airut repositories
  - host: github.com
    path: /airutorg/airut*
    methods: [GET, HEAD, POST]
  - host: api.github.com
    path: /repos/airutorg/airut*
  - host: api.github.com
    path: /graphql
    methods: [POST]
  - host: uploads.github.com
    path: /repos/airutorg/airut*
    methods: [POST]
  - host: raw.githubusercontent.com
    path: /airutorg/airut*
    methods: [GET, HEAD]
  - host: objects.githubusercontent.com
    path: /airutorg/airut*
    methods: [GET, HEAD]
  - host: results-receiver.actions.githubusercontent.com
    path: /rest/runs*
    methods: [GET, POST]
